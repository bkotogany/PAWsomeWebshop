#!/usr/bin/env php
<?php
// create_category.php <name> [--description="Category description"]
use Webshop\Model\Category;

require_once "vendor/autoload.php";
require __DIR__ . '/../src/Bootstrap.php';

$newCategoryName = $argv[1];
if ($newCategoryName != '') {
    $category = new Category();
    $category->setName($newCategoryName);
    
    // Paraméterek feldolgozása
    for ($i = 2; $i < count($argv); $i++) {
        $arg = $argv[$i];
        if (strpos($arg, '--') === 0) {
            $parts = explode('=', substr($arg, 2));
            if (count($parts) === 2) {
                $key = $parts[0];
                $value = $parts[1];
                
                switch ($key) {
                    case 'description':
                        $category->setDescription($value);
                        break;
                }
            }
        }
    }
    
    $entityManager->persist($category);
    $entityManager->flush();

    echo "Created Category with ID " . $category->getId() . "\n";
} else {
    echo "Usage: php create_category.php <name> [--description=\"Category description\"]\n";
} 